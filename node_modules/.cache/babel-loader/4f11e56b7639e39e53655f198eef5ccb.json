{"ast":null,"code":"import _objectSpread from\"D:/react-myprojects/hrms-airtable-july2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:/react-myprojects/hrms-airtable-july2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Button,ButtonGroup,TextField}from\"@material-ui/core\";import{makeStyles}from\"@material-ui/core/styles\";import{RecoilRoot,atom,selector,useRecoilState,useRecoilValue,useSetRecoilState}from\"recoil\";import{employees_url}from\"../utils/constants\";import{loginLevelState}from\"./data/atomdata\";import{useEmployeesContext}from\"../context/employees_context\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SigninForm=function SigninForm(){var classes=useStyles();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),role=_useState6[0],setRole=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),alert=_useState8[0],setAlert=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isLoading=_useState10[0],setIsLoading=_useState10[1];var _useRecoilState=useRecoilState(loginLevelState),_useRecoilState2=_slicedToArray(_useRecoilState,2),loginLevel=_useRecoilState2[0],setLoginLevel=_useRecoilState2[1];var _useEmployeesContext=useEmployeesContext(),employees=_useEmployeesContext.employees,loadEmployees=_useEmployeesContext.loadEmployees,setEditEmployeeID=_useEmployeesContext.setEditEmployeeID,employees_loading=_useEmployeesContext.employees_loading,employees_error=_useEmployeesContext.employees_error;useEffect(function(){loadEmployees();},[]);if(employees_loading){/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h2\",{children:\"Loading...\"})});}if(employees_error){/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h2\",{children:\"Internet connection problem!\"})});}var handleSubmit=function handleSubmit(e){e.preventDefault();var emp=employees.filter(function(item){return item.email===email;}).map(function(row){return{id:row.id,name:row.name,email:row.email,password:row.password,leave_bal:row.leave_bal,siteallows_fee:row.siteallows_fee,perdiem_fee:row.perdiem_fee,reporting_to:row.reporting_to};});if(emp[0].email===email&&emp[0].password===password){setLoginLevel(_objectSpread(_objectSpread({},loginLevel),{},{loginUser:emp[0].name,loginUserId:emp[0].id,loginLevel:role,loginEmail:email,login:true,leave_bal:emp[0].leave_bal,siteallows_fee:emp[0].siteallows_fee,perdiem_fee:emp[0].perdiem_fee,reporting_to:emp[0].reporting_to}));setEditEmployeeID(emp[0].id);setPassword(\"\");}else{setAlert(false);}};var handleStaffClick=function handleStaffClick(e){//e.preventDefault();\nsetRole(\"Staff\");handleSubmit(e);};var handleAdminClick=function handleAdminClick(e){e.preventDefault();setRole(\"Admin\");handleSubmit(e);};var handleAdminManagerClick=function handleAdminManagerClick(e){e.preventDefault();setRole(\"AdminManager\");handleSubmit(e);};var handleManagerClick=function handleManagerClick(e){e.preventDefault();setRole(\"Manager\");handleSubmit(e);};if(employees_loading){/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h2\",{children:\"Verifying...\"})});}return/*#__PURE__*/_jsxs(\"form\",{className:classes.root,onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(TextField,{label:\"Email\",variant:\"filled\",type:\"email\",required:true,style:{width:350},value:email,onChange:function onChange(e){return setEmail(e.target.value);}}),/*#__PURE__*/_jsx(TextField,{label:\"Password\",variant:\"filled\",type:\"password\",style:{width:350},required:true,value:password,onChange:function onChange(e){return setPassword(e.target.value);}}),/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:\"center\"},children:[/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",color:\"primary\",className:classes.button,onClick:function onClick(e){return setRole(\"Staff\");},children:\"Staff\"}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",color:\"primary\",className:classes.button,onClick:function onClick(e){return setRole(\"Admin\");},children:\"Admin\"}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",color:\"primary\",className:classes.button,onClick:function onClick(e){return setRole(\"AdminManager\");},children:\"Admin Manager\"}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",color:\"primary\",className:classes.button,onClick:function onClick(e){return setRole(\"Manager\");},children:\"Manager\"})]}),!alert&&/*#__PURE__*/_jsx(\"h3\",{children:\"Login Fail!\"})]});};var useStyles=makeStyles(function(theme){return{root:{display:\"flex\",flexDirection:\"column\",justifyContent:\"center\",alignItems:\"center\",padding:theme.spacing(2),\"& .MuiTextField-root\":{margin:theme.spacing(1),width:\"600px\"},\"& .MuiButtonBase-root\":{margin:theme.spacing(2)}}};});export default SigninForm;","map":{"version":3,"sources":["D:/react-myprojects/hrms-airtable-july2/src/components/SigninForm.js"],"names":["React","useState","useEffect","Button","ButtonGroup","TextField","makeStyles","RecoilRoot","atom","selector","useRecoilState","useRecoilValue","useSetRecoilState","employees_url","loginLevelState","useEmployeesContext","SigninForm","classes","useStyles","email","setEmail","password","setPassword","role","setRole","alert","setAlert","isLoading","setIsLoading","loginLevel","setLoginLevel","employees","loadEmployees","setEditEmployeeID","employees_loading","employees_error","handleSubmit","e","preventDefault","emp","filter","item","map","row","id","name","leave_bal","siteallows_fee","perdiem_fee","reporting_to","loginUser","loginUserId","loginEmail","login","handleStaffClick","handleAdminClick","handleAdminManagerClick","handleManagerClick","root","width","target","value","textAlign","button","theme","display","flexDirection","justifyContent","alignItems","padding","spacing","margin"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Button, ButtonGroup, TextField } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport {\r\n  RecoilRoot,\r\n  atom,\r\n  selector,\r\n  useRecoilState,\r\n  useRecoilValue,\r\n  useSetRecoilState,\r\n} from \"recoil\";\r\nimport { employees_url } from \"../utils/constants\";\r\nimport { loginLevelState } from \"./data/atomdata\";\r\nimport { useEmployeesContext } from \"../context/employees_context\";\r\n\r\nconst SigninForm = () => {\r\n  const classes = useStyles();\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [role, setRole] = useState(\"\");\r\n  const [alert, setAlert] = useState(true);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [loginLevel, setLoginLevel] = useRecoilState(loginLevelState);\r\n  const {\r\n    employees,\r\n    loadEmployees,\r\n    setEditEmployeeID,\r\n    employees_loading,\r\n    employees_error,\r\n  } = useEmployeesContext();\r\n\r\n  useEffect(() => {\r\n    loadEmployees();\r\n  }, []);\r\n\r\n  if (employees_loading) {\r\n    <div>\r\n      <h2>Loading...</h2>\r\n    </div>;\r\n  }\r\n  if (employees_error) {\r\n    <div>\r\n      <h2>Internet connection problem!</h2>\r\n    </div>;\r\n  }\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    const emp = employees\r\n      .filter((item) => item.email === email)\r\n      .map((row) => {\r\n        return {\r\n          id: row.id,\r\n          name: row.name,\r\n          email: row.email,\r\n          password: row.password,\r\n          leave_bal: row.leave_bal,\r\n          siteallows_fee: row.siteallows_fee,\r\n          perdiem_fee: row.perdiem_fee,\r\n          reporting_to: row.reporting_to,\r\n        };\r\n      });\r\n\r\n    if (emp[0].email === email && emp[0].password === password) {\r\n      setLoginLevel({\r\n        ...loginLevel,\r\n        loginUser: emp[0].name,\r\n        loginUserId: emp[0].id,\r\n        loginLevel: role,\r\n        loginEmail: email,\r\n        login: true,\r\n        leave_bal: emp[0].leave_bal,\r\n        siteallows_fee: emp[0].siteallows_fee,\r\n        perdiem_fee: emp[0].perdiem_fee,\r\n        reporting_to: emp[0].reporting_to,\r\n      });\r\n      setEditEmployeeID(emp[0].id);\r\n      setPassword(\"\");\r\n    } else {\r\n      setAlert(false);\r\n    }\r\n  };\r\n\r\n  const handleStaffClick = (e) => {\r\n    //e.preventDefault();\r\n    setRole(\"Staff\");\r\n    handleSubmit(e);\r\n  };\r\n  const handleAdminClick = (e) => {\r\n    e.preventDefault();\r\n    setRole(\"Admin\");\r\n    handleSubmit(e);\r\n  };\r\n  const handleAdminManagerClick = (e) => {\r\n    e.preventDefault();\r\n    setRole(\"AdminManager\");\r\n    handleSubmit(e);\r\n  };\r\n  const handleManagerClick = (e) => {\r\n    e.preventDefault();\r\n    setRole(\"Manager\");\r\n    handleSubmit(e);\r\n  };\r\n\r\n  if (employees_loading) {\r\n    <div>\r\n      <h2>Verifying...</h2>\r\n    </div>;\r\n  }\r\n\r\n  return (\r\n    <form className={classes.root} onSubmit={handleSubmit}>\r\n      <TextField\r\n        label=\"Email\"\r\n        variant=\"filled\"\r\n        type=\"email\"\r\n        required\r\n        style={{ width: 350 }}\r\n        value={email}\r\n        onChange={(e) => setEmail(e.target.value)}\r\n      />\r\n      <TextField\r\n        label=\"Password\"\r\n        variant=\"filled\"\r\n        type=\"password\"\r\n        style={{ width: 350 }}\r\n        required\r\n        value={password}\r\n        onChange={(e) => setPassword(e.target.value)}\r\n      />\r\n      <div style={{ textAlign: \"center\" }}>\r\n        {/* <ButtonGroup> */}\r\n          <Button\r\n            type=\"submit\"\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            className={classes.button}\r\n            onClick={(e) => setRole(\"Staff\")}\r\n          >\r\n            Staff\r\n          </Button>\r\n          <Button\r\n            type=\"submit\"\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            className={classes.button}\r\n            onClick={(e) => setRole(\"Admin\")}\r\n          >\r\n            Admin\r\n          </Button>\r\n          <Button\r\n            type=\"submit\"\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            className={classes.button}\r\n            onClick={(e) => setRole(\"AdminManager\")}\r\n          >\r\n            Admin Manager\r\n          </Button>\r\n          <Button\r\n            type=\"submit\"\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            className={classes.button}\r\n            onClick={(e) => setRole(\"Manager\")}\r\n          >\r\n            Manager\r\n          </Button>\r\n        {/* </ButtonGroup> */}\r\n      </div>\r\n      {!alert && <h3>Login Fail!</h3>}\r\n    </form>\r\n  );\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    padding: theme.spacing(2),\r\n\r\n    \"& .MuiTextField-root\": {\r\n      margin: theme.spacing(1),\r\n      width: \"600px\",\r\n    },\r\n    \"& .MuiButtonBase-root\": {\r\n      margin: theme.spacing(2),\r\n    },\r\n  },\r\n}));\r\n\r\nexport default SigninForm;\r\n"]},"metadata":{},"sourceType":"module"}