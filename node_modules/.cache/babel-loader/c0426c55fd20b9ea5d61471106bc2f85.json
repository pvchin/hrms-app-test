{"ast":null,"code":"import _objectWithoutProperties from\"D:/react-myprojects/hrms-airtable-july2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import _objectSpread from\"D:/react-myprojects/hrms-airtable-july2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"D:/react-myprojects/hrms-airtable-july2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/react-myprojects/hrms-airtable-july2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/react-myprojects/hrms-airtable-july2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useEffect,useReducer}from\"react\";import axios from\"axios\";import reducer from\"../reducers/employees_reducer\";import{employees_url}from\"../utils/constants\";import{SET_EDITEMPLOYEEID,SET_ISEDITING_ON,SET_ISEDITING_OFF,SET_SINGLEEMPLOYEE,GET_EMPLOYEES_BEGIN,GET_EMPLOYEES_SUCCESS,GET_EMPLOYEES_ERROR,GET_SINGLE_EMPLOYEE_BEGIN,GET_SINGLE_EMPLOYEE_SUCCESS,GET_SINGLE_EMPLOYEE_ERROR,ADD_EMPLOYEE_BEGIN,ADD_EMPLOYEE_SUCCESS,ADD_EMPLOYEE_ERROR,DELETE_EMPLOYEE_BEGIN,DELETE_EMPLOYEE_SUCCESS,DELETE_EMPLOYEE_ERROR,UPDATE_EMPLOYEE_BEGIN,UPDATE_EMPLOYEE_SUCCESS,UPDATE_EMPLOYEE_ERROR,RESET_SINGLE_EMPLOYEE,RESET_EMPLOYEES}from\"../actions\";import{jsx as _jsx}from\"react/jsx-runtime\";var initialState={isEditing:false,alert:{show:false,msg:\"\",type:\"\"},editEmployeeID:null,employees_loading:false,employees_error:false,employees:[],single_employee_loading:false,single_employee_error:false,single_employee:{},delete_employee_loading:false,delete_employee_error:false,update_employee_loading:false,update_employee_error:false,add_employee_loading:false,add_employee_error:false// filterValue: \"Female\",\n// filterfield: \"gender\",\n};var EmployeesContext=/*#__PURE__*/React.createContext();export var EmployeesProvider=function EmployeesProvider(_ref){var children=_ref.children;var _useReducer=useReducer(reducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];var loadEmployees=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res,employees;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch({type:GET_EMPLOYEES_BEGIN});_context.prev=1;_context.next=4;return fetch(employees_url);case 4:res=_context.sent;_context.next=7;return res.json();case 7:employees=_context.sent;dispatch({type:GET_EMPLOYEES_SUCCESS,payload:employees});_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](1);dispatch({type:GET_EMPLOYEES_ERROR});case 14:case\"end\":return _context.stop();}}},_callee,null,[[1,11]]);}));return function loadEmployees(){return _ref2.apply(this,arguments);};}();var setIsEditingOn=function setIsEditingOn(){dispatch({type:SET_ISEDITING_ON});};var setIsEditingOff=function setIsEditingOff(){dispatch({type:SET_ISEDITING_OFF});};var resetSingleEmployee=function resetSingleEmployee(){dispatch({type:RESET_SINGLE_EMPLOYEE});};var resetEmployees=function resetEmployees(){dispatch({type:RESET_EMPLOYEES});};var setEditEmployeeID=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:try{dispatch({type:SET_EDITEMPLOYEEID,payload:id});}catch(error){dispatch(error);}case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function setEditEmployeeID(_x){return _ref3.apply(this,arguments);};}();var getSingleEmployee=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id){var _yield$axios$get,data,singleemployee;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:dispatch({type:GET_SINGLE_EMPLOYEE_BEGIN});_context3.prev=1;_context3.next=4;return axios.get(\"\".concat(employees_url,\"?id=\").concat(id));case 4:_yield$axios$get=_context3.sent;data=_yield$axios$get.data;singleemployee=data;dispatch({type:GET_SINGLE_EMPLOYEE_SUCCESS,payload:singleemployee});_context3.next=13;break;case 10:_context3.prev=10;_context3.t0=_context3[\"catch\"](1);dispatch({type:GET_SINGLE_EMPLOYEE_ERROR});case 13:case\"end\":return _context3.stop();}}},_callee3,null,[[1,10]]);}));return function getSingleEmployee(_x2){return _ref4.apply(this,arguments);};}();var getSingleEmployeeEmail=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(fv){var _yield$axios$get2,data,singleemployee;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:dispatch({type:GET_SINGLE_EMPLOYEE_BEGIN});_context4.prev=1;_context4.next=4;return axios.get(\"\".concat(employees_url,\"?fv=\").concat(fv));case 4:_yield$axios$get2=_context4.sent;data=_yield$axios$get2.data;singleemployee=data;dispatch({type:GET_SINGLE_EMPLOYEE_SUCCESS,payload:singleemployee});_context4.next=13;break;case 10:_context4.prev=10;_context4.t0=_context4[\"catch\"](1);dispatch({type:GET_SINGLE_EMPLOYEE_ERROR});case 13:case\"end\":return _context4.stop();}}},_callee4,null,[[1,10]]);}));return function getSingleEmployeeEmail(_x3){return _ref5.apply(this,arguments);};}();var addEmployee=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(data){var id,name,ic_no,email,age,gender;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:id=data.id,name=data.name,ic_no=data.ic_no,email=data.email,age=data.age,gender=data.gender;//\ndispatch({type:ADD_EMPLOYEE_BEGIN});_context5.prev=2;_context5.next=5;return fetch(employees_url,{method:\"POST\",body:JSON.stringify(_objectSpread({},data))});case 5:dispatch({type:ADD_EMPLOYEE_SUCCESS});_context5.next=11;break;case 8:_context5.prev=8;_context5.t0=_context5[\"catch\"](2);dispatch({type:ADD_EMPLOYEE_ERROR});case 11:case\"end\":return _context5.stop();}}},_callee5,null,[[2,8]]);}));return function addEmployee(_x4){return _ref6.apply(this,arguments);};}();var updateEmployee=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(data){var id,fields;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:id=data.id,fields=_objectWithoutProperties(data,[\"id\"]);dispatch({type:UPDATE_EMPLOYEE_BEGIN});_context6.prev=2;_context6.next=5;return fetch(employees_url,{method:\"PUT\",body:JSON.stringify(_objectSpread({id:id},fields))});case 5:dispatch({type:UPDATE_EMPLOYEE_SUCCESS});_context6.next=11;break;case 8:_context6.prev=8;_context6.t0=_context6[\"catch\"](2);dispatch({type:UPDATE_EMPLOYEE_ERROR});case 11:case\"end\":return _context6.stop();}}},_callee6,null,[[2,8]]);}));return function updateEmployee(_x5){return _ref7.apply(this,arguments);};}();var deleteEmployee=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(id){return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:dispatch({type:DELETE_EMPLOYEE_BEGIN});_context7.prev=1;_context7.next=4;return fetch(employees_url,{method:\"DELETE\",body:JSON.stringify({id:id})});case 4:dispatch({type:DELETE_EMPLOYEE_SUCCESS});//loadEmployees();\n_context7.next=10;break;case 7:_context7.prev=7;_context7.t0=_context7[\"catch\"](1);dispatch({type:DELETE_EMPLOYEE_ERROR});case 10:case\"end\":return _context7.stop();}}},_callee7,null,[[1,7]]);}));return function deleteEmployee(_x6){return _ref8.apply(this,arguments);};}();return/*#__PURE__*/_jsx(EmployeesContext.Provider,{value:_objectSpread(_objectSpread({},state),{},{loadEmployees:loadEmployees,addEmployee:addEmployee,updateEmployee:updateEmployee,deleteEmployee:deleteEmployee,getSingleEmployee:getSingleEmployee,getSingleEmployeeEmail:getSingleEmployeeEmail,setEditEmployeeID:setEditEmployeeID,setIsEditingOn:setIsEditingOn,setIsEditingOff:setIsEditingOff,resetSingleEmployee:resetSingleEmployee,resetEmployees:resetEmployees}),children:children});};export var useEmployeesContext=function useEmployeesContext(){return useContext(EmployeesContext);};","map":{"version":3,"sources":["D:/react-myprojects/hrms-airtable-july2/src/context/employees_context.js"],"names":["React","useContext","useEffect","useReducer","axios","reducer","employees_url","SET_EDITEMPLOYEEID","SET_ISEDITING_ON","SET_ISEDITING_OFF","SET_SINGLEEMPLOYEE","GET_EMPLOYEES_BEGIN","GET_EMPLOYEES_SUCCESS","GET_EMPLOYEES_ERROR","GET_SINGLE_EMPLOYEE_BEGIN","GET_SINGLE_EMPLOYEE_SUCCESS","GET_SINGLE_EMPLOYEE_ERROR","ADD_EMPLOYEE_BEGIN","ADD_EMPLOYEE_SUCCESS","ADD_EMPLOYEE_ERROR","DELETE_EMPLOYEE_BEGIN","DELETE_EMPLOYEE_SUCCESS","DELETE_EMPLOYEE_ERROR","UPDATE_EMPLOYEE_BEGIN","UPDATE_EMPLOYEE_SUCCESS","UPDATE_EMPLOYEE_ERROR","RESET_SINGLE_EMPLOYEE","RESET_EMPLOYEES","initialState","isEditing","alert","show","msg","type","editEmployeeID","employees_loading","employees_error","employees","single_employee_loading","single_employee_error","single_employee","delete_employee_loading","delete_employee_error","update_employee_loading","update_employee_error","add_employee_loading","add_employee_error","EmployeesContext","createContext","EmployeesProvider","children","state","dispatch","loadEmployees","fetch","res","json","payload","setIsEditingOn","setIsEditingOff","resetSingleEmployee","resetEmployees","setEditEmployeeID","id","error","getSingleEmployee","get","data","singleemployee","getSingleEmployeeEmail","fv","addEmployee","name","ic_no","email","age","gender","method","body","JSON","stringify","updateEmployee","fields","deleteEmployee","useEmployeesContext"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useReducer } from \"react\";\r\nimport axios from \"axios\";\r\nimport reducer from \"../reducers/employees_reducer\";\r\nimport { employees_url } from \"../utils/constants\";\r\n\r\nimport {\r\n  SET_EDITEMPLOYEEID,\r\n  SET_ISEDITING_ON,\r\n  SET_ISEDITING_OFF,\r\n  SET_SINGLEEMPLOYEE,\r\n  GET_EMPLOYEES_BEGIN,\r\n  GET_EMPLOYEES_SUCCESS,\r\n  GET_EMPLOYEES_ERROR,\r\n  GET_SINGLE_EMPLOYEE_BEGIN,\r\n  GET_SINGLE_EMPLOYEE_SUCCESS,\r\n  GET_SINGLE_EMPLOYEE_ERROR,\r\n  ADD_EMPLOYEE_BEGIN,\r\n  ADD_EMPLOYEE_SUCCESS,\r\n  ADD_EMPLOYEE_ERROR,\r\n  DELETE_EMPLOYEE_BEGIN,\r\n  DELETE_EMPLOYEE_SUCCESS,\r\n  DELETE_EMPLOYEE_ERROR,\r\n  UPDATE_EMPLOYEE_BEGIN,\r\n  UPDATE_EMPLOYEE_SUCCESS,\r\n  UPDATE_EMPLOYEE_ERROR,\r\n  RESET_SINGLE_EMPLOYEE,\r\n  RESET_EMPLOYEES,\r\n} from \"../actions\";\r\n\r\nconst initialState = {\r\n  isEditing: false,\r\n  alert: { show: false, msg: \"\", type: \"\" },\r\n  editEmployeeID: null,\r\n  employees_loading: false,\r\n  employees_error: false,\r\n  employees: [],\r\n  single_employee_loading: false,\r\n  single_employee_error: false,\r\n  single_employee: {},\r\n  delete_employee_loading: false,\r\n  delete_employee_error: false,\r\n  update_employee_loading: false,\r\n  update_employee_error: false,\r\n  add_employee_loading: false,\r\n  add_employee_error: false,\r\n  // filterValue: \"Female\",\r\n  // filterfield: \"gender\",\r\n};\r\n\r\nconst EmployeesContext = React.createContext();\r\n\r\nexport const EmployeesProvider = ({ children }) => {\r\n  const [state, dispatch] = useReducer(reducer, initialState);\r\n\r\n  const loadEmployees = async () => {\r\n    dispatch({ type: GET_EMPLOYEES_BEGIN });\r\n    try {\r\n      // const res = await fetch(\r\n      //   `${employees_url}?filterValue=\"${state.filterValue}\"&filterField=\"${state.filterField}\"`\r\n      // );\r\n      const res = await fetch(employees_url);\r\n      //const { data } = await axios.get(employees_url);\r\n      //const employees = data;\r\n      const employees = await res.json();\r\n      dispatch({ type: GET_EMPLOYEES_SUCCESS, payload: employees });\r\n    } catch (error) {\r\n      dispatch({ type: GET_EMPLOYEES_ERROR });\r\n    }\r\n  };\r\n\r\n  const setIsEditingOn = () => {\r\n    dispatch({ type: SET_ISEDITING_ON });\r\n  };\r\n\r\n  const setIsEditingOff = () => {\r\n    dispatch({ type: SET_ISEDITING_OFF });\r\n  };\r\n\r\n  const resetSingleEmployee = () => {\r\n    dispatch({ type: RESET_SINGLE_EMPLOYEE });\r\n  };\r\n\r\n  const resetEmployees = () => {\r\n    dispatch({ type: RESET_EMPLOYEES });\r\n  };\r\n\r\n  const setEditEmployeeID = async (id) => {\r\n    try {\r\n      dispatch({ type: SET_EDITEMPLOYEEID, payload: id });\r\n    } catch (error) {\r\n      dispatch(error);\r\n    }\r\n  };\r\n\r\n  const getSingleEmployee = async (id) => {\r\n    dispatch({ type: GET_SINGLE_EMPLOYEE_BEGIN });\r\n    try {\r\n      const { data } = await axios.get(`${employees_url}?id=${id}`);\r\n      const singleemployee = data;\r\n      dispatch({ type: GET_SINGLE_EMPLOYEE_SUCCESS, payload: singleemployee });\r\n    } catch (error) {\r\n      dispatch({ type: GET_SINGLE_EMPLOYEE_ERROR });\r\n    }\r\n  };\r\n\r\n  const getSingleEmployeeEmail = async (fv) => {\r\n    dispatch({ type: GET_SINGLE_EMPLOYEE_BEGIN });\r\n    try {\r\n      const { data } = await axios.get(`${employees_url}?fv=${fv}`);\r\n      const singleemployee = data;\r\n      dispatch({ type: GET_SINGLE_EMPLOYEE_SUCCESS, payload: singleemployee });\r\n    } catch (error) {\r\n      dispatch({ type: GET_SINGLE_EMPLOYEE_ERROR });\r\n    }\r\n  };\r\n\r\n  const addEmployee = async (data) => {\r\n    const { id, name, ic_no, email, age, gender } = data;\r\n    //\r\n    dispatch({ type: ADD_EMPLOYEE_BEGIN });\r\n    try {\r\n      await fetch(employees_url, {\r\n        method: \"POST\",\r\n        body: JSON.stringify({ ...data }),\r\n      });\r\n      dispatch({ type: ADD_EMPLOYEE_SUCCESS });\r\n    } catch (err) {\r\n      dispatch({ type: ADD_EMPLOYEE_ERROR });\r\n    }\r\n  };\r\n\r\n  const updateEmployee = async (data) => {\r\n    const { id, ...fields } = data;\r\n\r\n    dispatch({ type: UPDATE_EMPLOYEE_BEGIN });\r\n    try {\r\n      await fetch(employees_url, {\r\n        method: \"PUT\",\r\n        body: JSON.stringify({ id, ...fields }),\r\n      });\r\n      dispatch({ type: UPDATE_EMPLOYEE_SUCCESS });\r\n    } catch (error) {\r\n      dispatch({ type: UPDATE_EMPLOYEE_ERROR });\r\n    }\r\n  };\r\n\r\n  const deleteEmployee = async (id) => {\r\n    dispatch({ type: DELETE_EMPLOYEE_BEGIN });\r\n    try {\r\n      await fetch(employees_url, {\r\n        method: \"DELETE\",\r\n        body: JSON.stringify({ id: id }),\r\n      });\r\n      dispatch({ type: DELETE_EMPLOYEE_SUCCESS });\r\n      //loadEmployees();\r\n    } catch (err) {\r\n      dispatch({ type: DELETE_EMPLOYEE_ERROR });\r\n    }\r\n  };\r\n  return (\r\n    <EmployeesContext.Provider\r\n      value={{\r\n        ...state,\r\n        loadEmployees,\r\n        addEmployee,\r\n        updateEmployee,\r\n        deleteEmployee,\r\n        getSingleEmployee,\r\n        getSingleEmployeeEmail,\r\n        setEditEmployeeID,\r\n        setIsEditingOn,\r\n        setIsEditingOff,\r\n        resetSingleEmployee,\r\n        resetEmployees,\r\n      }}\r\n    >\r\n      {children}\r\n    </EmployeesContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useEmployeesContext = () => {\r\n  return useContext(EmployeesContext);\r\n};\r\n"]},"metadata":{},"sourceType":"module"}