{"ast":null,"code":"import _objectWithoutProperties from\"D:/react-myprojects/hrms-airtable-july2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import _objectSpread from\"D:/react-myprojects/hrms-airtable-july2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"D:/react-myprojects/hrms-airtable-july2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/react-myprojects/hrms-airtable-july2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/react-myprojects/hrms-airtable-july2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useEffect,useReducer}from\"react\";import axios from\"axios\";import reducer from\"../reducers/leaves_reducer\";import{leaves_url}from\"../utils/constants\";import{SET_EDITLEAVEID,SET_ISLEAVEEDITING_ON,SET_ISLEAVEEDITING_OFF,SET_SINGLELEAVE,GET_LEAVES_BEGIN,GET_LEAVES_SUCCESS,GET_LEAVES_ERROR,GET_SINGLE_LEAVE_BEGIN,GET_SINGLE_LEAVE_SUCCESS,GET_SINGLE_LEAVE_ERROR,GET_SINGLEBATCH_LEAVE_BEGIN,GET_SINGLEBATCH_LEAVE_SUCCESS,GET_SINGLEBATCH_LEAVE_ERROR,ADD_LEAVE_BEGIN,ADD_LEAVE_SUCCESS,ADD_LEAVE_ERROR,DELETE_LEAVE_BEGIN,DELETE_LEAVE_SUCCESS,DELETE_LEAVE_ERROR,UPDATE_LEAVE_BEGIN,UPDATE_LEAVE_SUCCESS,UPDATE_LEAVE_ERROR,RESET_SINGLE_LEAVE,RESET_TABLES}from\"../actions\";import{jsx as _jsx}from\"react/jsx-runtime\";var initialState={isLeaveEditing:false,alertleave:{show:false,msg:\"\",type:\"\"},editLeaveID:null,leaves_loading:false,leaves_error:false,leaves:[],single_leave_loading:false,single_leave_error:false,single_leave:{},singlebatch_leave_loading:false,singlebatch_leave_error:false,singlebatch_leave:{},delete_leave_loading:false,delete_leave_error:false,update_leave_loading:false,update_leave_error:false,add_leave_loading:false,add_leave_error:false// filterValue: \"Female\",\n// filterfield: \"gender\",\n};var LeavesContext=/*#__PURE__*/React.createContext();export var LeavesProvider=function LeavesProvider(_ref){var children=_ref.children;var _useReducer=useReducer(reducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];var loadLeaves=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res,leaves;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch({type:GET_LEAVES_BEGIN});_context.prev=1;_context.next=4;return fetch(leaves_url);case 4:res=_context.sent;_context.next=7;return res.json();case 7:leaves=_context.sent;dispatch({type:GET_LEAVES_SUCCESS,payload:leaves});_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](1);dispatch({type:GET_LEAVES_ERROR});case 14:case\"end\":return _context.stop();}}},_callee,null,[[1,11]]);}));return function loadLeaves(){return _ref2.apply(this,arguments);};}();var loadPendingLeaves=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(fi){var _yield$axios$get,data,leaves;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch({type:GET_LEAVES_BEGIN});_context2.prev=1;_context2.next=4;return axios.get(\"\".concat(leaves_url,\"?fi=\").concat(fi));case 4:_yield$axios$get=_context2.sent;data=_yield$axios$get.data;leaves=data;dispatch({type:GET_LEAVES_SUCCESS,payload:leaves});_context2.next=13;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](1);dispatch({type:GET_LEAVES_ERROR});case 13:case\"end\":return _context2.stop();}}},_callee2,null,[[1,10]]);}));return function loadPendingLeaves(_x){return _ref3.apply(this,arguments);};}();var loadEmpLeaves=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(fv){var _yield$axios$get2,data,leaves;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:dispatch({type:GET_LEAVES_BEGIN});_context3.prev=1;_context3.next=4;return axios.get(\"\".concat(leaves_url,\"?fv=\").concat(fv));case 4:_yield$axios$get2=_context3.sent;data=_yield$axios$get2.data;leaves=data;dispatch({type:GET_LEAVES_SUCCESS,payload:leaves});_context3.next=13;break;case 10:_context3.prev=10;_context3.t0=_context3[\"catch\"](1);dispatch({type:GET_LEAVES_ERROR});case 13:case\"end\":return _context3.stop();}}},_callee3,null,[[1,10]]);}));return function loadEmpLeaves(_x2){return _ref4.apply(this,arguments);};}();var setIsLeaveEditingOn=function setIsLeaveEditingOn(){dispatch({type:SET_ISLEAVEEDITING_ON});};var setIsLeaveEditingOff=function setIsLeaveEditingOff(){dispatch({type:SET_ISLEAVEEDITING_OFF});};var resetSingleLeave=function resetSingleLeave(){dispatch({type:RESET_SINGLE_LEAVE});};var setEditLeaveID=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(id){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:try{dispatch({type:SET_EDITLEAVEID,payload:id});}catch(error){dispatch(error);}case 1:case\"end\":return _context4.stop();}}},_callee4);}));return function setEditLeaveID(_x3){return _ref5.apply(this,arguments);};}();var getSingleLeave=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(id){var _yield$axios$get3,data,singleleave;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:dispatch({type:GET_SINGLE_LEAVE_BEGIN});_context5.prev=1;_context5.next=4;return axios.get(\"\".concat(leaves_url,\"?id=\").concat(id));case 4:_yield$axios$get3=_context5.sent;data=_yield$axios$get3.data;singleleave=data;dispatch({type:GET_SINGLE_LEAVE_SUCCESS,payload:singleleave});_context5.next=13;break;case 10:_context5.prev=10;_context5.t0=_context5[\"catch\"](1);dispatch({type:GET_SINGLE_LEAVE_ERROR});case 13:case\"end\":return _context5.stop();}}},_callee5,null,[[1,10]]);}));return function getSingleLeave(_x4){return _ref6.apply(this,arguments);};}();var getSingleBatchLeave=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(empid){var _yield$axios$get4,data,singlebatchleave;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:dispatch({type:GET_SINGLEBATCH_LEAVE_BEGIN});_context6.prev=1;_context6.next=4;return axios.get(\"\".concat(leaves_url,\"?fv=\").concat(empid));case 4:_yield$axios$get4=_context6.sent;data=_yield$axios$get4.data;singlebatchleave=data;// const res = await fetch(`${leaves_url}?fv=${empid}`);\n//console.log(`${family_url}?fv=${linkid}`);\n// const singlebatchleave = await res.json();\ndispatch({type:GET_SINGLEBATCH_LEAVE_SUCCESS,payload:singlebatchleave});_context6.next=13;break;case 10:_context6.prev=10;_context6.t0=_context6[\"catch\"](1);dispatch({type:GET_SINGLEBATCH_LEAVE_ERROR});case 13:case\"end\":return _context6.stop();}}},_callee6,null,[[1,10]]);}));return function getSingleBatchLeave(_x5){return _ref7.apply(this,arguments);};}();var addLeave=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(data){var id,name,from_date,to_date,reason,no_of_days,status;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:id=data.id,name=data.name,from_date=data.from_date,to_date=data.to_date,reason=data.reason,no_of_days=data.no_of_days,status=data.status;//\ndispatch({type:ADD_LEAVE_BEGIN});_context7.prev=2;_context7.next=5;return fetch(leaves_url,{method:\"POST\",body:JSON.stringify(_objectSpread({},data))});case 5:dispatch({type:ADD_LEAVE_SUCCESS});_context7.next=11;break;case 8:_context7.prev=8;_context7.t0=_context7[\"catch\"](2);dispatch({type:ADD_LEAVE_ERROR});case 11:case\"end\":return _context7.stop();}}},_callee7,null,[[2,8]]);}));return function addLeave(_x6){return _ref8.apply(this,arguments);};}();var updateLeave=/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(data){var id,fields;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:id=data.id,fields=_objectWithoutProperties(data,[\"id\"]);dispatch({type:UPDATE_LEAVE_BEGIN});_context8.prev=2;_context8.next=5;return fetch(leaves_url,{method:\"PUT\",body:JSON.stringify(_objectSpread({id:id},fields))});case 5:dispatch({type:UPDATE_LEAVE_SUCCESS});_context8.next=11;break;case 8:_context8.prev=8;_context8.t0=_context8[\"catch\"](2);dispatch({type:UPDATE_LEAVE_ERROR});case 11:case\"end\":return _context8.stop();}}},_callee8,null,[[2,8]]);}));return function updateLeave(_x7){return _ref9.apply(this,arguments);};}();var deleteLeave=/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(id){return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:dispatch({type:DELETE_LEAVE_BEGIN});_context9.prev=1;_context9.next=4;return fetch(leaves_url,{method:\"DELETE\",body:JSON.stringify({id:id})});case 4:dispatch({type:DELETE_LEAVE_SUCCESS});//loadEmployees();\n_context9.next=10;break;case 7:_context9.prev=7;_context9.t0=_context9[\"catch\"](1);dispatch({type:DELETE_LEAVE_ERROR});case 10:case\"end\":return _context9.stop();}}},_callee9,null,[[1,7]]);}));return function deleteLeave(_x8){return _ref10.apply(this,arguments);};}();return/*#__PURE__*/_jsx(LeavesContext.Provider,{value:_objectSpread(_objectSpread({},state),{},{loadLeaves:loadLeaves,loadPendingLeaves:loadPendingLeaves,loadEmpLeaves:loadEmpLeaves,addLeave:addLeave,updateLeave:updateLeave,deleteLeave:deleteLeave,getSingleLeave:getSingleLeave,getSingleBatchLeave:getSingleBatchLeave,setEditLeaveID:setEditLeaveID,setIsLeaveEditingOn:setIsLeaveEditingOn,setIsLeaveEditingOff:setIsLeaveEditingOff,resetSingleLeave:resetSingleLeave}),children:children});};export var useLeavesContext=function useLeavesContext(){return useContext(LeavesContext);};","map":{"version":3,"sources":["D:/react-myprojects/hrms-airtable-july2/src/context/leaves_context.js"],"names":["React","useContext","useEffect","useReducer","axios","reducer","leaves_url","SET_EDITLEAVEID","SET_ISLEAVEEDITING_ON","SET_ISLEAVEEDITING_OFF","SET_SINGLELEAVE","GET_LEAVES_BEGIN","GET_LEAVES_SUCCESS","GET_LEAVES_ERROR","GET_SINGLE_LEAVE_BEGIN","GET_SINGLE_LEAVE_SUCCESS","GET_SINGLE_LEAVE_ERROR","GET_SINGLEBATCH_LEAVE_BEGIN","GET_SINGLEBATCH_LEAVE_SUCCESS","GET_SINGLEBATCH_LEAVE_ERROR","ADD_LEAVE_BEGIN","ADD_LEAVE_SUCCESS","ADD_LEAVE_ERROR","DELETE_LEAVE_BEGIN","DELETE_LEAVE_SUCCESS","DELETE_LEAVE_ERROR","UPDATE_LEAVE_BEGIN","UPDATE_LEAVE_SUCCESS","UPDATE_LEAVE_ERROR","RESET_SINGLE_LEAVE","RESET_TABLES","initialState","isLeaveEditing","alertleave","show","msg","type","editLeaveID","leaves_loading","leaves_error","leaves","single_leave_loading","single_leave_error","single_leave","singlebatch_leave_loading","singlebatch_leave_error","singlebatch_leave","delete_leave_loading","delete_leave_error","update_leave_loading","update_leave_error","add_leave_loading","add_leave_error","LeavesContext","createContext","LeavesProvider","children","state","dispatch","loadLeaves","fetch","res","json","payload","loadPendingLeaves","fi","get","data","loadEmpLeaves","fv","setIsLeaveEditingOn","setIsLeaveEditingOff","resetSingleLeave","setEditLeaveID","id","error","getSingleLeave","singleleave","getSingleBatchLeave","empid","singlebatchleave","addLeave","name","from_date","to_date","reason","no_of_days","status","method","body","JSON","stringify","updateLeave","fields","deleteLeave","useLeavesContext"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useReducer } from \"react\";\r\nimport axios from \"axios\";\r\nimport reducer from \"../reducers/leaves_reducer\";\r\nimport { leaves_url } from \"../utils/constants\";\r\n\r\nimport {\r\n  SET_EDITLEAVEID,\r\n  SET_ISLEAVEEDITING_ON,\r\n  SET_ISLEAVEEDITING_OFF,\r\n  SET_SINGLELEAVE,\r\n  GET_LEAVES_BEGIN,\r\n  GET_LEAVES_SUCCESS,\r\n  GET_LEAVES_ERROR,\r\n  GET_SINGLE_LEAVE_BEGIN,\r\n  GET_SINGLE_LEAVE_SUCCESS,\r\n  GET_SINGLE_LEAVE_ERROR,\r\n  GET_SINGLEBATCH_LEAVE_BEGIN,\r\n  GET_SINGLEBATCH_LEAVE_SUCCESS,\r\n  GET_SINGLEBATCH_LEAVE_ERROR,\r\n  ADD_LEAVE_BEGIN,\r\n  ADD_LEAVE_SUCCESS,\r\n  ADD_LEAVE_ERROR,\r\n  DELETE_LEAVE_BEGIN,\r\n  DELETE_LEAVE_SUCCESS,\r\n  DELETE_LEAVE_ERROR,\r\n  UPDATE_LEAVE_BEGIN,\r\n  UPDATE_LEAVE_SUCCESS,\r\n  UPDATE_LEAVE_ERROR,\r\n  RESET_SINGLE_LEAVE,\r\n  RESET_TABLES,\r\n} from \"../actions\";\r\n\r\nconst initialState = {\r\n  isLeaveEditing: false,\r\n  alertleave: { show: false, msg: \"\", type: \"\" },\r\n  editLeaveID: null,\r\n  leaves_loading: false,\r\n  leaves_error: false,\r\n  leaves: [],\r\n  single_leave_loading: false,\r\n  single_leave_error: false,\r\n  single_leave: {},\r\n  singlebatch_leave_loading: false,\r\n  singlebatch_leave_error: false,\r\n  singlebatch_leave: {},\r\n  delete_leave_loading: false,\r\n  delete_leave_error: false,\r\n  update_leave_loading: false,\r\n  update_leave_error: false,\r\n  add_leave_loading: false,\r\n  add_leave_error: false,\r\n  // filterValue: \"Female\",\r\n  // filterfield: \"gender\",\r\n};\r\n\r\nconst LeavesContext = React.createContext();\r\n\r\nexport const LeavesProvider = ({ children }) => {\r\n  const [state, dispatch] = useReducer(reducer, initialState);\r\n\r\n  const loadLeaves = async () => {\r\n    dispatch({ type: GET_LEAVES_BEGIN });\r\n    try {\r\n      // const res = await fetch(\r\n      //   `${employees_url}?filterValue=\"${state.filterValue}\"&filterField=\"${state.filterField}\"`\r\n      // );\r\n      const res = await fetch(leaves_url);\r\n      //const { data } = await axios.get(employees_url);\r\n      //const employees = data;\r\n      const leaves = await res.json();\r\n      dispatch({ type: GET_LEAVES_SUCCESS, payload: leaves });\r\n    } catch (error) {\r\n      dispatch({ type: GET_LEAVES_ERROR });\r\n    }\r\n  };\r\n\r\n  const loadPendingLeaves = async (fi) => {\r\n    dispatch({ type: GET_LEAVES_BEGIN });\r\n    try {\r\n      //const res = await fetch(leaves_url);\r\n      //const { data } = await axios.get(employees_url);\r\n      //const employees = data;\r\n      const { data } = await axios.get(`${leaves_url}?fi=${fi}`);\r\n      const leaves = data;\r\n\r\n      dispatch({ type: GET_LEAVES_SUCCESS, payload: leaves });\r\n    } catch (error) {\r\n      dispatch({ type: GET_LEAVES_ERROR });\r\n    }\r\n  };\r\n\r\n  const loadEmpLeaves = async (fv) => {\r\n    dispatch({ type: GET_LEAVES_BEGIN });\r\n    try {\r\n      const { data } = await axios.get(`${leaves_url}?fv=${fv}`);\r\n      const leaves = data;\r\n\r\n      dispatch({ type: GET_LEAVES_SUCCESS, payload: leaves });\r\n    } catch (error) {\r\n      dispatch({ type: GET_LEAVES_ERROR });\r\n    }\r\n  };\r\n\r\n  const setIsLeaveEditingOn = () => {\r\n    dispatch({ type: SET_ISLEAVEEDITING_ON });\r\n  };\r\n\r\n  const setIsLeaveEditingOff = () => {\r\n    dispatch({ type: SET_ISLEAVEEDITING_OFF });\r\n  };\r\n\r\n  const resetSingleLeave = () => {\r\n    dispatch({ type: RESET_SINGLE_LEAVE });\r\n  };\r\n\r\n  const setEditLeaveID = async (id) => {\r\n    try {\r\n      dispatch({ type: SET_EDITLEAVEID, payload: id });\r\n    } catch (error) {\r\n      dispatch(error);\r\n    }\r\n  };\r\n\r\n  const getSingleLeave = async (id) => {\r\n    dispatch({ type: GET_SINGLE_LEAVE_BEGIN });\r\n    try {\r\n      const { data } = await axios.get(`${leaves_url}?id=${id}`);\r\n      const singleleave = data;\r\n      dispatch({ type: GET_SINGLE_LEAVE_SUCCESS, payload: singleleave });\r\n    } catch (error) {\r\n      dispatch({ type: GET_SINGLE_LEAVE_ERROR });\r\n    }\r\n  };\r\n\r\n  const getSingleBatchLeave = async (empid) => {\r\n    dispatch({ type: GET_SINGLEBATCH_LEAVE_BEGIN });\r\n    try {\r\n      const { data } = await axios.get(`${leaves_url}?fv=${empid}`);\r\n      const singlebatchleave = data;\r\n\r\n      // const res = await fetch(`${leaves_url}?fv=${empid}`);\r\n      //console.log(`${family_url}?fv=${linkid}`);\r\n      // const singlebatchleave = await res.json();\r\n\r\n      dispatch({\r\n        type: GET_SINGLEBATCH_LEAVE_SUCCESS,\r\n        payload: singlebatchleave,\r\n      });\r\n    } catch (error) {\r\n      dispatch({ type: GET_SINGLEBATCH_LEAVE_ERROR });\r\n    }\r\n  };\r\n\r\n  const addLeave = async (data) => {\r\n    const { id, name, from_date, to_date, reason, no_of_days, status } = data;\r\n    //\r\n    dispatch({ type: ADD_LEAVE_BEGIN });\r\n    try {\r\n      await fetch(leaves_url, {\r\n        method: \"POST\",\r\n        body: JSON.stringify({ ...data }),\r\n      });\r\n      dispatch({ type: ADD_LEAVE_SUCCESS });\r\n    } catch (err) {\r\n      dispatch({ type: ADD_LEAVE_ERROR });\r\n    }\r\n  };\r\n\r\n  const updateLeave = async (data) => {\r\n    const { id, ...fields } = data;\r\n\r\n    dispatch({ type: UPDATE_LEAVE_BEGIN });\r\n    try {\r\n      await fetch(leaves_url, {\r\n        method: \"PUT\",\r\n        body: JSON.stringify({ id, ...fields }),\r\n      });\r\n      dispatch({ type: UPDATE_LEAVE_SUCCESS });\r\n    } catch (error) {\r\n      dispatch({ type: UPDATE_LEAVE_ERROR });\r\n    }\r\n  };\r\n\r\n  const deleteLeave = async (id) => {\r\n    dispatch({ type: DELETE_LEAVE_BEGIN });\r\n    try {\r\n      await fetch(leaves_url, {\r\n        method: \"DELETE\",\r\n        body: JSON.stringify({ id: id }),\r\n      });\r\n      dispatch({ type: DELETE_LEAVE_SUCCESS });\r\n      //loadEmployees();\r\n    } catch (err) {\r\n      dispatch({ type: DELETE_LEAVE_ERROR });\r\n    }\r\n  };\r\n  return (\r\n    <LeavesContext.Provider\r\n      value={{\r\n        ...state,\r\n        loadLeaves,\r\n        loadPendingLeaves,\r\n        loadEmpLeaves,\r\n        addLeave,\r\n        updateLeave,\r\n        deleteLeave,\r\n        getSingleLeave,\r\n        getSingleBatchLeave,\r\n        setEditLeaveID,\r\n        setIsLeaveEditingOn,\r\n        setIsLeaveEditingOff,\r\n        resetSingleLeave,\r\n      }}\r\n    >\r\n      {children}\r\n    </LeavesContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useLeavesContext = () => {\r\n  return useContext(LeavesContext);\r\n};\r\n"]},"metadata":{},"sourceType":"module"}