{"ast":null,"code":"import _objectSpread from\"D:/react-myprojects/hrms-airtable-july2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{useEffect}from\"react\";import{Button,Icon,TextField,Paper,Typography}from\"@material-ui/core\";import{makeStyles}from\"@material-ui/core/styles\";import MenuItem from\"@material-ui/core/MenuItem\";import{useEmployeesContext}from\"../context/employees_context\";import{useDailyAllowancesContext}from\"../context/dailyallowances_context\";import{Controller,useForm}from\"react-hook-form\";import{useHistory}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var initial_values={name:\"\",period:\"\",location:\"\",manager_name:\"\",status:\"Pending\",no_of_days:0,amount:0};var DailyAllowanceForm=function DailyAllowanceForm(){var history=useHistory();var classes=useStyles();var _useDailyAllowancesCo=useDailyAllowancesContext(),isDailyAllowanceEditing=_useDailyAllowancesCo.isDailyAllowanceEditing,single_dailyallowance=_useDailyAllowancesCo.single_dailyallowance,updateDailyAllowance=_useDailyAllowancesCo.updateDailyAllowance,addDailyAllowance=_useDailyAllowancesCo.addDailyAllowance,editDailyAllowanceID=_useDailyAllowancesCo.editDailyAllowanceID,loadDailyAllowances=_useDailyAllowancesCo.loadDailyAllowances,single_dailyallowance_loading=_useDailyAllowancesCo.single_dailyallowance_loading,dailyallowance_period=_useDailyAllowancesCo.dailyallowance_period;var _useEmployeesContext=useEmployeesContext(),loadEmployees=_useEmployeesContext.loadEmployees,employees=_useEmployeesContext.employees;var _ref=single_dailyallowance||initial_values,name=_ref.name,period=_ref.period,location=_ref.location,manager_name=_ref.manager_name,status=_ref.status,no_of_days=_ref.no_of_days,amount=_ref.amount;var _useForm=useForm(),handleSubmit=_useForm.handleSubmit,control=_useForm.control;useEffect(function(){loadEmployees();},[]);var onSubmit=function onSubmit(data){if(isDailyAllowanceEditing){updateDailyAllowance(_objectSpread({id:editDailyAllowanceID},data));}else{addDailyAllowance(_objectSpread({},data));}loadDailyAllowances();history.push(\"/batchdailyallowances\");};if(single_dailyallowance_loading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Paper,{className:classes.root,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",component:\"h3\",children:\"DAILY ALLOWANCES CLAIM FORM\"}),/*#__PURE__*/_jsx(Typography,{component:\"p\",children:\"Daily Allowances Claim Application\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Controller,{name:\"name\",control:control,defaultValue:name,render:function render(_ref2){var _ref2$field=_ref2.field,onChange=_ref2$field.onChange,value=_ref2$field.value,error=_ref2.fieldState.error;return/*#__PURE__*/_jsx(TextField,{label:\"Name\",id:\"margin-normal\",name:\"name\",defaultValue:name,className:classes.textField,onChange:onChange,error:!!error,helperText:error?error.message:null,select:true,children:employees.map(function(e){return/*#__PURE__*/_jsx(MenuItem,{value:e.name,children:e.name},e.name);})});},rules:{required:\"Name required\"}})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Controller,{name:\"period\",control:control,defaultValue:isDailyAllowanceEditing?period:dailyallowance_period,render:function render(_ref3){var _ref3$field=_ref3.field,onChange=_ref3$field.onChange,value=_ref3$field.value,error=_ref3.fieldState.error;return/*#__PURE__*/_jsx(TextField,{label:\"Period\",id:\"margin-normal\",name:\"period\",defaultValue:isDailyAllowanceEditing?period:dailyallowance_period,className:classes.textField,onChange:onChange,error:!!error,helperText:error?error.message:null,InputProps:{readOnly:true}});},rules:{required:\"Period is required\"}})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Controller,{name:\"location\",control:control,defaultValue:location,render:function render(_ref4){var _ref4$field=_ref4.field,onChange=_ref4$field.onChange,value=_ref4$field.value,error=_ref4.fieldState.error;return/*#__PURE__*/_jsx(TextField,{label:\"Location\",id:\"margin-normal\",name:\"location\",defaultValue:location,className:classes.textField,onChange:onChange,error:!!error,helperText:error?error.message:null});},rules:{required:\"Purchased Date is required\"}})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Controller,{name:\"manager_name\",control:control,defaultValue:manager_name,render:function render(_ref5){var _ref5$field=_ref5.field,onChange=_ref5$field.onChange,value=_ref5$field.value,error=_ref5.fieldState.error;return/*#__PURE__*/_jsx(TextField,{label:\"Manager Name\",id:\"margin-normal\",name:\"manager_name\",defaultValue:manager_name,className:classes.textField,onChange:onChange,error:!!error,helperText:error?error.message:null});}// rules={{ required: \"Reason is required\" }}\n})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Controller,{name:\"no_of_days\",control:control,defaultValue:no_of_days,render:function render(_ref6){var _ref6$field=_ref6.field,_onChange=_ref6$field.onChange,value=_ref6$field.value,error=_ref6.fieldState.error;return/*#__PURE__*/_jsx(TextField,{label:\"No Of Days\",type:\"number\",id:\"standard-number\",name:\"no_of_days\",defaultValue:no_of_days,className:classes.textField//onChange={onChange}\n,onChange:function onChange(e){_onChange(parseInt(e.target.value,10));},error:!!error,helperText:error?error.message:null});}//rules={{ required: \"IC No required\" }}\n})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Controller,{name:\"amount\",control:control,defaultValue:amount,render:function render(_ref7){var _ref7$field=_ref7.field,_onChange2=_ref7$field.onChange,value=_ref7$field.value,error=_ref7.fieldState.error;return/*#__PURE__*/_jsx(TextField,{label:\"Amount\",type:\"number\",id:\"standard-number\",name:\"amount\",defaultValue:amount,className:classes.textField//onChange={onChange}\n,onChange:function onChange(e){_onChange2(parseInt(e.target.value,10));},error:!!error,helperText:error?error.message:null});}//rules={{ required: \"IC No required\" }}\n})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Controller,{name:\"status\",control:control,defaultValue:\"Pending\",render:function render(_ref8){var _ref8$field=_ref8.field,onChange=_ref8$field.onChange,value=_ref8$field.value,error=_ref8.fieldState.error;return/*#__PURE__*/_jsxs(TextField,{label:\"Status\",id:\"margin-normal\",name:\"status\",defaultValue:status,className:classes.textField,onChange:onChange,error:!!error,helperText:error?error.message:null,select:true,children:[/*#__PURE__*/_jsx(MenuItem,{value:\"Pending\",children:\"Pending\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"Cancel\",children:\"Cancel\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"Approved\",children:\"Approved\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"Rejected\",children:\"Rejected\"})]});}//rules={{ required: \"Status is required\" }}\n})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Button,{type:\"submit\",variant:\"contained\",color:\"primary\",className:classes.button,children:[\"Submit \",/*#__PURE__*/_jsx(Icon,{className:classes.rightIcon,children:\"send\"})]})})]})]})});};var useStyles=makeStyles(function(theme){return{button:{margin:theme.spacing(1)},leftIcon:{marginRight:theme.spacing(1)},rightIcon:{marginLeft:theme.spacing(1)},iconSmall:{fontSize:20},root:{padding:theme.spacing(3,2)},container:{display:\"flex\",flexWrap:\"wrap\"},textField:{marginLeft:theme.spacing(1),marginRight:theme.spacing(1),width:400}};});export default DailyAllowanceForm;","map":{"version":3,"sources":["D:/react-myprojects/hrms-airtable-july2/src/components/DaiylAllowanceForm.js"],"names":["React","useEffect","Button","Icon","TextField","Paper","Typography","makeStyles","MenuItem","useEmployeesContext","useDailyAllowancesContext","Controller","useForm","useHistory","initial_values","name","period","location","manager_name","status","no_of_days","amount","DailyAllowanceForm","history","classes","useStyles","isDailyAllowanceEditing","single_dailyallowance","updateDailyAllowance","addDailyAllowance","editDailyAllowanceID","loadDailyAllowances","single_dailyallowance_loading","dailyallowance_period","loadEmployees","employees","handleSubmit","control","onSubmit","data","id","push","root","field","onChange","value","error","fieldState","textField","message","map","e","required","readOnly","parseInt","target","button","rightIcon","theme","margin","spacing","leftIcon","marginRight","marginLeft","iconSmall","fontSize","padding","container","display","flexWrap","width"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\r\nimport {\r\n  Button,\r\n  Icon,\r\n  TextField,\r\n  Paper,\r\n  Typography,\r\n  } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport { useEmployeesContext } from \"../context/employees_context\";\r\nimport { useDailyAllowancesContext } from \"../context/dailyallowances_context\";\r\nimport { Controller, useForm } from \"react-hook-form\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst initial_values = {\r\n  name: \"\",\r\n  period: \"\",\r\n  location: \"\",\r\n  manager_name: \"\",\r\n  status: \"Pending\",\r\n  no_of_days: 0,\r\n  amount: 0,\r\n};\r\n\r\nconst DailyAllowanceForm = () => {\r\n  let history = useHistory();\r\n  const classes = useStyles();\r\n  const {\r\n    isDailyAllowanceEditing,\r\n    single_dailyallowance,\r\n    updateDailyAllowance,\r\n    addDailyAllowance,\r\n    editDailyAllowanceID,\r\n    loadDailyAllowances,\r\n    single_dailyallowance_loading,\r\n    dailyallowance_period,\r\n  } = useDailyAllowancesContext();\r\n  const { loadEmployees, employees } = useEmployeesContext();\r\n  const { name, period, location, manager_name, status, no_of_days, amount } =\r\n    single_dailyallowance || initial_values;\r\n  const { handleSubmit, control } = useForm();\r\n\r\n  useEffect(() => {\r\n    loadEmployees();\r\n  }, []);\r\n\r\n  const onSubmit = (data) => {\r\n    if (isDailyAllowanceEditing) {\r\n      updateDailyAllowance({ id: editDailyAllowanceID, ...data });\r\n    } else {\r\n      addDailyAllowance({ ...data });\r\n    }\r\n    loadDailyAllowances();\r\n    history.push(\"/batchdailyallowances\");\r\n  };\r\n\r\n  if (single_dailyallowance_loading) {\r\n    return <div>Loading...</div>;\r\n  }\r\n  return (\r\n    <div>\r\n      <Paper className={classes.root}>\r\n        <Typography variant=\"h5\" component=\"h3\">\r\n          DAILY ALLOWANCES CLAIM FORM\r\n        </Typography>\r\n        <Typography component=\"p\">\r\n          Daily Allowances Claim Application\r\n        </Typography>\r\n\r\n        <form onSubmit={handleSubmit(onSubmit)}>\r\n          <div>\r\n            <Controller\r\n              name=\"name\"\r\n              control={control}\r\n              defaultValue={name}\r\n              render={({\r\n                field: { onChange, value },\r\n                fieldState: { error },\r\n              }) => {\r\n                return (\r\n                  <TextField\r\n                    label=\"Name\"\r\n                    id=\"margin-normal\"\r\n                    name=\"name\"\r\n                    defaultValue={name}\r\n                    className={classes.textField}\r\n                    onChange={onChange}\r\n                    error={!!error}\r\n                    helperText={error ? error.message : null}\r\n                    select\r\n                  >\r\n                    {employees.map((e) => {\r\n                      return (\r\n                        <MenuItem key={e.name} value={e.name}>\r\n                          {e.name}\r\n                        </MenuItem>\r\n                      );\r\n                    })}\r\n                  </TextField>\r\n                );\r\n              }}\r\n              rules={{ required: \"Name required\" }}\r\n            />\r\n          </div>\r\n          <div>\r\n            <Controller\r\n              name=\"period\"\r\n              control={control}\r\n              defaultValue={\r\n                isDailyAllowanceEditing ? period : dailyallowance_period\r\n              }\r\n              render={({\r\n                field: { onChange, value },\r\n                fieldState: { error },\r\n              }) => {\r\n                return (\r\n                  <TextField\r\n                    label=\"Period\"\r\n                    id=\"margin-normal\"\r\n                    name=\"period\"\r\n                    defaultValue={\r\n                      isDailyAllowanceEditing ? period : dailyallowance_period\r\n                    }\r\n                    className={classes.textField}\r\n                    onChange={onChange}\r\n                    error={!!error}\r\n                    helperText={error ? error.message : null}\r\n                    InputProps={{\r\n                      readOnly: true,\r\n                    }}\r\n                  />\r\n                );\r\n              }}\r\n              rules={{ required: \"Period is required\" }}\r\n            />\r\n          </div>\r\n          <div>\r\n            <Controller\r\n              name=\"location\"\r\n              control={control}\r\n              defaultValue={location}\r\n              render={({\r\n                field: { onChange, value },\r\n                fieldState: { error },\r\n              }) => {\r\n                return (\r\n                  <TextField\r\n                    label=\"Location\"\r\n                    id=\"margin-normal\"\r\n                    name=\"location\"\r\n                    defaultValue={location}\r\n                    className={classes.textField}\r\n                    onChange={onChange}\r\n                    error={!!error}\r\n                    helperText={error ? error.message : null}\r\n                  />\r\n                );\r\n              }}\r\n              rules={{ required: \"Purchased Date is required\" }}\r\n            />\r\n          </div>\r\n          <div>\r\n            <Controller\r\n              name=\"manager_name\"\r\n              control={control}\r\n              defaultValue={manager_name}\r\n              render={({\r\n                field: { onChange, value },\r\n                fieldState: { error },\r\n              }) => {\r\n                return (\r\n                  <TextField\r\n                    label=\"Manager Name\"\r\n                    id=\"margin-normal\"\r\n                    name=\"manager_name\"\r\n                    defaultValue={manager_name}\r\n                    className={classes.textField}\r\n                    onChange={onChange}\r\n                    error={!!error}\r\n                    helperText={error ? error.message : null}\r\n                  />\r\n                );\r\n              }}\r\n              // rules={{ required: \"Reason is required\" }}\r\n            />\r\n          </div>\r\n          <div>\r\n            <Controller\r\n              name=\"no_of_days\"\r\n              control={control}\r\n              defaultValue={no_of_days}\r\n              render={({\r\n                field: { onChange, value },\r\n                fieldState: { error },\r\n              }) => {\r\n                return (\r\n                  <TextField\r\n                    label=\"No Of Days\"\r\n                    type=\"number\"\r\n                    id=\"standard-number\"\r\n                    name=\"no_of_days\"\r\n                    defaultValue={no_of_days}\r\n                    className={classes.textField}\r\n                    //onChange={onChange}\r\n                    onChange={(e) => {\r\n                      onChange(parseInt(e.target.value, 10));\r\n                    }}\r\n                    error={!!error}\r\n                    helperText={error ? error.message : null}\r\n                  />\r\n                );\r\n              }}\r\n              //rules={{ required: \"IC No required\" }}\r\n            />\r\n          </div>\r\n          <div>\r\n            <Controller\r\n              name=\"amount\"\r\n              control={control}\r\n              defaultValue={amount}\r\n              render={({\r\n                field: { onChange, value },\r\n                fieldState: { error },\r\n              }) => {\r\n                return (\r\n                  <TextField\r\n                    label=\"Amount\"\r\n                    type=\"number\"\r\n                    id=\"standard-number\"\r\n                    name=\"amount\"\r\n                    defaultValue={amount}\r\n                    className={classes.textField}\r\n                    //onChange={onChange}\r\n                    onChange={(e) => {\r\n                      onChange(parseInt(e.target.value, 10));\r\n                    }}\r\n                    error={!!error}\r\n                    helperText={error ? error.message : null}\r\n                  />\r\n                );\r\n              }}\r\n              //rules={{ required: \"IC No required\" }}\r\n            />\r\n          </div>\r\n          <div>\r\n            <Controller\r\n              name=\"status\"\r\n              control={control}\r\n              defaultValue=\"Pending\"\r\n              render={({\r\n                field: { onChange, value },\r\n                fieldState: { error },\r\n              }) => {\r\n                return (\r\n                  <TextField\r\n                    label=\"Status\"\r\n                    id=\"margin-normal\"\r\n                    name=\"status\"\r\n                    defaultValue={status}\r\n                    className={classes.textField}\r\n                    onChange={onChange}\r\n                    error={!!error}\r\n                    helperText={error ? error.message : null}\r\n                    select\r\n                  >\r\n                    <MenuItem value=\"Pending\">Pending</MenuItem>\r\n                    <MenuItem value=\"Cancel\">Cancel</MenuItem>\r\n                    <MenuItem value=\"Approved\">Approved</MenuItem>\r\n                    <MenuItem value=\"Rejected\">Rejected</MenuItem>\r\n                  </TextField>\r\n                );\r\n              }}\r\n              //rules={{ required: \"Status is required\" }}\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <Button\r\n              type=\"submit\"\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              className={classes.button}\r\n            >\r\n              Submit <Icon className={classes.rightIcon}>send</Icon>\r\n            </Button>\r\n          </div>\r\n        </form>\r\n      </Paper>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  button: {\r\n    margin: theme.spacing(1),\r\n  },\r\n  leftIcon: {\r\n    marginRight: theme.spacing(1),\r\n  },\r\n  rightIcon: {\r\n    marginLeft: theme.spacing(1),\r\n  },\r\n  iconSmall: {\r\n    fontSize: 20,\r\n  },\r\n  root: {\r\n    padding: theme.spacing(3, 2),\r\n  },\r\n  container: {\r\n    display: \"flex\",\r\n    flexWrap: \"wrap\",\r\n  },\r\n  textField: {\r\n    marginLeft: theme.spacing(1),\r\n    marginRight: theme.spacing(1),\r\n    width: 400,\r\n  },\r\n}));\r\n\r\nexport default DailyAllowanceForm;\r\n"]},"metadata":{},"sourceType":"module"}