{"ast":null,"code":"import _objectSpread from\"D:/react-myprojects/hrms-airtable-july2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:/react-myprojects/hrms-airtable-july2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Button,Icon,TextField,Paper,Typography,Divider}from\"@material-ui/core\";import{useRecoilState}from\"recoil\";import{loginLevelState}from\"./data/atomdata\";import{makeStyles}from\"@material-ui/core/styles\";import MenuItem from\"@material-ui/core/MenuItem\";import{useEmployeesContext}from\"../context/employees_context\";import{useLeavesContext}from\"../context/leaves_context\";import{Controller,useForm}from\"react-hook-form\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var initial_state={name:\"\",to_date:\"\",from_date:\"\",reason:\"\",status:\"Pending\",no_of_days:0,leave_bal:0};var LeaveForm=function LeaveForm(_ref){var formdata=_ref.formdata,setFormdata=_ref.setFormdata,handleDialogClose=_ref.handleDialogClose;var classes=useStyles();var _useState=useState(initial_state),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];var _useRecoilState=useRecoilState(loginLevelState),_useRecoilState2=_slicedToArray(_useRecoilState,2),loginLevel=_useRecoilState2[0],setLoginLevel=_useRecoilState2[1];var _useForm=useForm(),handleSubmit=_useForm.handleSubmit,control=_useForm.control;var initialValues=Object.values(initial_state).join(\"\");var _useLeavesContext=useLeavesContext(),leaves=_useLeavesContext.leaves,isLeaveEditing=_useLeavesContext.isLeaveEditing,editLeaveID=_useLeavesContext.editLeaveID,updateLeave=_useLeavesContext.updateLeave,addLeave=_useLeavesContext.addLeave;var onSubmit=function onSubmit(data){if(isLeaveEditing){//updateLeave({ id: editLeaveID, ...data });\n// update leaves\nvar editleavedata=leaves.filter(function(r){return r.id===editLeaveID;});editleavedata[0].from_date=data.from_date;editleavedata[0].to_date=data.to_date;editleavedata[0].no_of_days=data.no_of_days;editleavedata[0].reason=data.reason;}else{//addLeave({ ...data, empid: loginLevel.loginUserId });\nleaves.push(_objectSpread(_objectSpread({},data),{},{empid:loginLevel.loginUserId}));}//history.push(\"/leave\");\nhandleDialogClose();};// useEffect(() => {\n//   setState(initial_state);\n//   setState({ ...formdata });\n//   setState({ ...formdata });\n//   console.log(\"laeve form\",state)\n// }, [initialValues]);\nreturn/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Paper,{className:classes.root,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",component:\"h3\",children:\"LEAVE FORM\"}),/*#__PURE__*/_jsx(Typography,{component:\"p\",children:\"Leave Application\"}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Controller,{name:\"name\",control:control,defaultValue:loginLevel.loginUser,render:function render(_ref2){var _ref2$field=_ref2.field,_onChange=_ref2$field.onChange,value=_ref2$field.value,error=_ref2.fieldState.error;return/*#__PURE__*/_jsx(TextField,{label:\"Name\",id:\"margin-normal\",name:\"name\",defaultValue:loginLevel.loginUser//value={value}\n,className:classes.textField,onChange:function onChange(e){console.log(e.target.value);_onChange(e.target.value);},InputProps:{readOnly:true},error:!!error,helperText:error?error.message:null//select\n});}// rules={{ required: \"Name required\" }}\n})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Controller,{name:\"from_date\",control:control,defaultValue:formdata.from_date,render:function render(_ref3){var _ref3$field=_ref3.field,onChange=_ref3$field.onChange,value=_ref3$field.value,error=_ref3.fieldState.error;return/*#__PURE__*/_jsx(TextField,{label:\"From Date\",type:\"date\",id:\"margin-normal\",name:\"from_date\",defaultValue:formdata.from_date,className:classes.textField,onChange:onChange,error:!!error,helperText:error?error.message:null,InputLabelProps:{shrink:true}});},rules:{required:\"From Date is required\"}})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Controller,{name:\"to_date\",control:control,defaultValue:formdata.to_date,render:function render(_ref4){var _ref4$field=_ref4.field,onChange=_ref4$field.onChange,value=_ref4$field.value,error=_ref4.fieldState.error;return/*#__PURE__*/_jsx(TextField,{label:\"To Date\",id:\"margin-normal\",type:\"date\",name:\"to_date\",defaultValue:formdata.to_date,className:classes.textField,onChange:onChange,error:!!error,helperText:error?error.message:null,InputLabelProps:{shrink:true}});},rules:{required:\"To Date is required\"}})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Controller,{name:\"leave_bal\",control:control,defaultValue:loginLevel.leave_bal,render:function render(_ref5){var _ref5$field=_ref5.field,_onChange2=_ref5$field.onChange,value=_ref5$field.value,error=_ref5.fieldState.error;return/*#__PURE__*/_jsx(TextField,{disable:true,label:\"Leave Balance\",type:\"number\",id:\"standard-number\",name:\"leave_bal\",defaultValue:loginLevel.leave_bal,className:classes.textField//onChange={onChange}\n,onChange:function onChange(e){_onChange2(parseInt(e.target.value,10));},error:!!error,helperText:error?error.message:null,InputProps:{readOnly:true}});}//rules={{ required: \"IC No required\" }}\n})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Controller,{name:\"no_of_days\",control:control,defaultValue:formdata.no_of_days,render:function render(_ref6){var _ref6$field=_ref6.field,_onChange3=_ref6$field.onChange,value=_ref6$field.value,error=_ref6.fieldState.error;return/*#__PURE__*/_jsx(TextField,{label:\"No Of Days\",type:\"number\",id:\"standard-number\",name:\"no_of_days\",defaultValue:formdata.no_of_days,className:classes.textField//onChange={onChange}\n,onChange:function onChange(e){_onChange3(parseInt(e.target.value,10));},error:!!error,helperText:error?error.message:null});}//rules={{ required: \"IC No required\" }}\n})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Controller,{name:\"reason\",control:control,defaultValue:formdata.reason,render:function render(_ref7){var _ref7$field=_ref7.field,onChange=_ref7$field.onChange,value=_ref7$field.value,error=_ref7.fieldState.error;return/*#__PURE__*/_jsx(TextField,{label:\"Reason\",id:\"margin-normal\",name:\"reason\",defaultValue:formdata.reason,className:classes.textField,onChange:onChange,error:!!error,helperText:error?error.message:null});}// rules={{ required: \"Reason is required\" }}\n})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Controller,{name:\"status\",control:control,defaultValue:formdata.status,render:function render(_ref8){var _ref8$field=_ref8.field,onChange=_ref8$field.onChange,value=_ref8$field.value,error=_ref8.fieldState.error;return/*#__PURE__*/_jsx(TextField,{label:\"Status\",id:\"margin-normal\",name:\"status\",defaultValue:formdata.status,className:classes.textField,onChange:onChange,error:!!error,helperText:error?error.message:null,InputProps:{readOnly:true}// select\n});}//rules={{ required: \"Status is required\" }}\n})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Button,{type:\"submit\",variant:\"contained\",color:\"primary\",className:classes.button,onClick:handleSubmit(onSubmit),children:[\"Submit \",/*#__PURE__*/_jsx(Icon,{className:classes.rightIcon,children:\"send\"})]})})]})]})});};var useStyles=makeStyles(function(theme){return{button:{margin:theme.spacing(1)},leftIcon:{marginRight:theme.spacing(1)},rightIcon:{marginLeft:theme.spacing(1)},iconSmall:{fontSize:20},root:{padding:theme.spacing(3,2)},container:{display:\"flex\",flexWrap:\"wrap\"},textField:{marginLeft:theme.spacing(1),marginRight:theme.spacing(1),width:400}};});export default LeaveForm;","map":{"version":3,"sources":["D:/react-myprojects/hrms-airtable-july2/src/components/LeaveForm.js"],"names":["React","useState","useEffect","Button","Icon","TextField","Paper","Typography","Divider","useRecoilState","loginLevelState","makeStyles","MenuItem","useEmployeesContext","useLeavesContext","Controller","useForm","initial_state","name","to_date","from_date","reason","status","no_of_days","leave_bal","LeaveForm","formdata","setFormdata","handleDialogClose","classes","useStyles","state","setState","loginLevel","setLoginLevel","handleSubmit","control","initialValues","Object","values","join","leaves","isLeaveEditing","editLeaveID","updateLeave","addLeave","onSubmit","data","editleavedata","filter","r","id","push","empid","loginUserId","root","loginUser","field","onChange","value","error","fieldState","textField","e","console","log","target","readOnly","message","shrink","required","parseInt","button","rightIcon","theme","margin","spacing","leftIcon","marginRight","marginLeft","iconSmall","fontSize","padding","container","display","flexWrap","width"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  Button,\r\n  Icon,\r\n  TextField,\r\n  Paper,\r\n  Typography,\r\n  Divider,\r\n} from \"@material-ui/core\";\r\nimport { useRecoilState } from \"recoil\";\r\nimport { loginLevelState } from \"./data/atomdata\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport { useEmployeesContext } from \"../context/employees_context\";\r\nimport { useLeavesContext } from \"../context/leaves_context\";\r\nimport { Controller, useForm } from \"react-hook-form\";\r\n\r\nconst initial_state = {\r\n  name: \"\",\r\n  to_date: \"\",\r\n  from_date: \"\",\r\n  reason: \"\",\r\n  status: \"Pending\",\r\n  no_of_days: 0,\r\n  leave_bal: 0,\r\n};\r\n\r\nconst LeaveForm = ({ formdata, setFormdata, handleDialogClose }) => {\r\n  const classes = useStyles();\r\n  const [state, setState] = useState(initial_state);\r\n  const [loginLevel, setLoginLevel] = useRecoilState(loginLevelState);\r\n  const { handleSubmit, control } = useForm();\r\n  const initialValues = Object.values(initial_state).join(\"\");\r\n  const { leaves, isLeaveEditing, editLeaveID, updateLeave, addLeave } =\r\n    useLeavesContext();\r\n\r\n  const onSubmit = (data) => {\r\n    if (isLeaveEditing) {\r\n     \r\n      //updateLeave({ id: editLeaveID, ...data });\r\n      // update leaves\r\n      const editleavedata = leaves.filter((r) => r.id === editLeaveID);\r\n      editleavedata[0].from_date = data.from_date;\r\n      editleavedata[0].to_date = data.to_date;\r\n      editleavedata[0].no_of_days = data.no_of_days;\r\n      editleavedata[0].reason = data.reason;\r\n    } else {\r\n     \r\n      //addLeave({ ...data, empid: loginLevel.loginUserId });\r\n      leaves.push({ ...data, empid: loginLevel.loginUserId })\r\n      \r\n    }\r\n\r\n    //history.push(\"/leave\");\r\n    handleDialogClose();\r\n  };\r\n\r\n  // useEffect(() => {\r\n  //   setState(initial_state);\r\n  //   setState({ ...formdata });\r\n  //   setState({ ...formdata });\r\n  //   console.log(\"laeve form\",state)\r\n  // }, [initialValues]);\r\n\r\n  return (\r\n    <div>\r\n      <Paper className={classes.root}>\r\n        <Typography variant=\"h5\" component=\"h3\">\r\n          LEAVE FORM\r\n        </Typography>\r\n        <Typography component=\"p\">Leave Application</Typography>\r\n        <Divider />\r\n        <form onSubmit={handleSubmit(onSubmit)}>\r\n          <div>\r\n            <Controller\r\n              name=\"name\"\r\n              control={control}\r\n              defaultValue={loginLevel.loginUser}\r\n              render={({\r\n                field: { onChange, value },\r\n                fieldState: { error },\r\n              }) => {\r\n                return (\r\n                  <TextField\r\n                    label=\"Name\"\r\n                    id=\"margin-normal\"\r\n                    name=\"name\"\r\n                    defaultValue={loginLevel.loginUser}\r\n                    //value={value}\r\n                    className={classes.textField}\r\n                    onChange={(e) => {\r\n                      console.log(e.target.value);\r\n                      onChange(e.target.value);\r\n                    }}\r\n                    InputProps={{\r\n                      readOnly: true,\r\n                    }}\r\n                    error={!!error}\r\n                    helperText={error ? error.message : null}\r\n                    //select\r\n                  >\r\n                    {/* {employees.map((e) => {\r\n                      return (\r\n                        <MenuItem key={e.name} value={e.name}>\r\n                          {e.name}\r\n                        </MenuItem>\r\n                      );\r\n                    })} */}\r\n                  </TextField>\r\n                );\r\n              }}\r\n              // rules={{ required: \"Name required\" }}\r\n            />\r\n          </div>\r\n          <div>\r\n            <Controller\r\n              name=\"from_date\"\r\n              control={control}\r\n              defaultValue={formdata.from_date}\r\n              render={({\r\n                field: { onChange, value },\r\n                fieldState: { error },\r\n              }) => {\r\n                return (\r\n                  <TextField\r\n                    label=\"From Date\"\r\n                    type=\"date\"\r\n                    id=\"margin-normal\"\r\n                    name=\"from_date\"\r\n                    defaultValue={formdata.from_date}\r\n                    className={classes.textField}\r\n                    onChange={onChange}\r\n                    error={!!error}\r\n                    helperText={error ? error.message : null}\r\n                    InputLabelProps={{\r\n                      shrink: true,\r\n                    }}\r\n                  />\r\n                );\r\n              }}\r\n              rules={{ required: \"From Date is required\" }}\r\n            />\r\n          </div>\r\n          <div>\r\n            <Controller\r\n              name=\"to_date\"\r\n              control={control}\r\n              defaultValue={formdata.to_date}\r\n              render={({\r\n                field: { onChange, value },\r\n                fieldState: { error },\r\n              }) => {\r\n                return (\r\n                  <TextField\r\n                    label=\"To Date\"\r\n                    id=\"margin-normal\"\r\n                    type=\"date\"\r\n                    name=\"to_date\"\r\n                    defaultValue={formdata.to_date}\r\n                    className={classes.textField}\r\n                    onChange={onChange}\r\n                    error={!!error}\r\n                    helperText={error ? error.message : null}\r\n                    InputLabelProps={{\r\n                      shrink: true,\r\n                    }}\r\n                  />\r\n                );\r\n              }}\r\n              rules={{ required: \"To Date is required\" }}\r\n            />\r\n          </div>\r\n          <div>\r\n            <Controller\r\n              name=\"leave_bal\"\r\n              control={control}\r\n              defaultValue={loginLevel.leave_bal}\r\n              render={({\r\n                field: { onChange, value },\r\n                fieldState: { error },\r\n              }) => {\r\n                return (\r\n                  <TextField\r\n                    disable\r\n                    label=\"Leave Balance\"\r\n                    type=\"number\"\r\n                    id=\"standard-number\"\r\n                    name=\"leave_bal\"\r\n                    defaultValue={loginLevel.leave_bal}\r\n                    className={classes.textField}\r\n                    //onChange={onChange}\r\n                    onChange={(e) => {\r\n                      onChange(parseInt(e.target.value, 10));\r\n                    }}\r\n                    error={!!error}\r\n                    helperText={error ? error.message : null}\r\n                    InputProps={{\r\n                      readOnly: true,\r\n                    }}\r\n                  />\r\n                );\r\n              }}\r\n              //rules={{ required: \"IC No required\" }}\r\n            />\r\n          </div>\r\n          <div>\r\n            <Controller\r\n              name=\"no_of_days\"\r\n              control={control}\r\n              defaultValue={formdata.no_of_days}\r\n              render={({\r\n                field: { onChange, value },\r\n                fieldState: { error },\r\n              }) => {\r\n                return (\r\n                  <TextField\r\n                    label=\"No Of Days\"\r\n                    type=\"number\"\r\n                    id=\"standard-number\"\r\n                    name=\"no_of_days\"\r\n                    defaultValue={formdata.no_of_days}\r\n                    className={classes.textField}\r\n                    //onChange={onChange}\r\n                    onChange={(e) => {\r\n                      onChange(parseInt(e.target.value, 10));\r\n                    }}\r\n                    error={!!error}\r\n                    helperText={error ? error.message : null}\r\n                  />\r\n                );\r\n              }}\r\n              //rules={{ required: \"IC No required\" }}\r\n            />\r\n          </div>\r\n          <div>\r\n            <Controller\r\n              name=\"reason\"\r\n              control={control}\r\n              defaultValue={formdata.reason}\r\n              render={({\r\n                field: { onChange, value },\r\n                fieldState: { error },\r\n              }) => {\r\n                return (\r\n                  <TextField\r\n                    label=\"Reason\"\r\n                    id=\"margin-normal\"\r\n                    name=\"reason\"\r\n                    defaultValue={formdata.reason}\r\n                    className={classes.textField}\r\n                    onChange={onChange}\r\n                    error={!!error}\r\n                    helperText={error ? error.message : null}\r\n                  />\r\n                );\r\n              }}\r\n              // rules={{ required: \"Reason is required\" }}\r\n            />\r\n          </div>\r\n          <div>\r\n            <Controller\r\n              name=\"status\"\r\n              control={control}\r\n              defaultValue={formdata.status}\r\n              render={({\r\n                field: { onChange, value },\r\n                fieldState: { error },\r\n              }) => {\r\n                return (\r\n                  <TextField\r\n                    label=\"Status\"\r\n                    id=\"margin-normal\"\r\n                    name=\"status\"\r\n                    defaultValue={formdata.status}\r\n                    className={classes.textField}\r\n                    onChange={onChange}\r\n                    error={!!error}\r\n                    helperText={error ? error.message : null}\r\n                    InputProps={{\r\n                      readOnly: true,\r\n                    }}\r\n                    // select\r\n                  >\r\n                    {/* <MenuItem value=\"Pending\">Pending</MenuItem>\r\n                    <MenuItem value=\"Cancel\">Cancel</MenuItem>\r\n                    <MenuItem value=\"Approve\">Approve</MenuItem>\r\n                    <MenuItem value=\"Reject\">Reject</MenuItem> */}\r\n                  </TextField>\r\n                );\r\n              }}\r\n              //rules={{ required: \"Status is required\" }}\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <Button\r\n              type=\"submit\"\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              className={classes.button}\r\n              onClick={handleSubmit(onSubmit)}\r\n            >\r\n              Submit <Icon className={classes.rightIcon}>send</Icon>\r\n            </Button>\r\n          </div>\r\n        </form>\r\n      </Paper>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  button: {\r\n    margin: theme.spacing(1),\r\n  },\r\n  leftIcon: {\r\n    marginRight: theme.spacing(1),\r\n  },\r\n  rightIcon: {\r\n    marginLeft: theme.spacing(1),\r\n  },\r\n  iconSmall: {\r\n    fontSize: 20,\r\n  },\r\n  root: {\r\n    padding: theme.spacing(3, 2),\r\n  },\r\n  container: {\r\n    display: \"flex\",\r\n    flexWrap: \"wrap\",\r\n  },\r\n  textField: {\r\n    marginLeft: theme.spacing(1),\r\n    marginRight: theme.spacing(1),\r\n    width: 400,\r\n  },\r\n}));\r\n\r\nexport default LeaveForm;\r\n"]},"metadata":{},"sourceType":"module"}