{"ast":null,"code":"import _slicedToArray from\"D:/react-myprojects/hrms-airtable-july2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{useHistory,Link}from\"react-router-dom\";import{Grid,ListItem,ListItemText}from\"@material-ui/core\";import{makeStyles}from\"@material-ui/core/styles\";import{useSetRecoilState,useRecoilValue,useRecoilState,useRecoilValueLoadable}from\"recoil\";import{allowsPeriodState,allowsDataState,empidState,loginLevelState}from\"./data/atomdata\";import{fetchDailyAllowancesSelector}from\"./data/selectordata\";import AddIcon from\"@material-ui/icons/Add\";import EditIcon from\"@material-ui/icons/Edit\";import DeleteIcon from\"@material-ui/icons/Delete\";import CheckIcon from\"@material-ui/icons/Check\";import SearchIcon from\"@material-ui/icons/Search\";import ArrowBackIcon from\"@material-ui/icons/ArrowBack\";import{CustomDialog}from\"../helpers/CustomDialog\";import{useDailyAllowancesContext}from\"../context/dailyallowances_context\";//import { useEmployeesContext } from \"../context/employees_context\";\nimport DailyAllowsDetlsTable from\"./DailyAllowsDetlsTable\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var FILTERSTRING=\"Pending\";var columns=[{title:\"Name\",field:\"name\"},{title:\"Period\",field:\"period\"},{title:\"Location\",field:\"location\"},{title:\"Manager\",field:\"manager_name\"},{title:\"Days\",field:\"no_of_days\",type:\"numeric\"},{title:\"Amount\",field:\"amount\",type:\"currency\"},{title:\"Status\",field:\"status\"}];export default function DailyAllowancesTableViewStaff(){var history=useHistory();var classes=useStyles();var _useRecoilState=useRecoilState(loginLevelState),_useRecoilState2=_slicedToArray(_useRecoilState,2),loginLevel=_useRecoilState2[0],setLoginLevel=_useRecoilState2[1];var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isDialogOpen=_useState2[0],setIsDialogOpen=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),tmpallowsdata=_useState4[0],setTmpallowsdata=_useState4[1];var allows_period=useRecoilValue(allowsPeriodState);var allows_empid=useRecoilValue(empidState);var _useRecoilState3=useRecoilState(allowsDataState),_useRecoilState4=_slicedToArray(_useRecoilState3,2),allowsdata=_useRecoilState4[0],setAllowsdata=_useRecoilState4[1];var setEmpID=useSetRecoilState(empidState);var title=\"Site Allowances (\".concat(allows_period,\")\");var _useDailyAllowancesCo=useDailyAllowancesContext(),dailyallowances=_useDailyAllowancesCo.dailyallowances,loadEmpDailyAllowances=_useDailyAllowancesCo.loadEmpDailyAllowances,dailyallowances_loading=_useDailyAllowancesCo.dailyallowances_loading,dailyallowances_error=_useDailyAllowancesCo.dailyallowances_error;useEffect(function(){loadEmpDailyAllowances(loginLevel.loginUserId);},[]);var handleDialogOpen=function handleDialogOpen(){//console.log(\"allowsdetls\", allowsdata, allowsdataRef, singlebatch_dailyallowsdetl);\n//setAllowsdata({ singlebatch_dailyallowsdetl });\nsetIsDialogOpen(true);};var handleDialogClose=function handleDialogClose(){setIsDialogOpen(false);//getSingleBatchDailyAllowance(dailyallowance_period);\n};if(dailyallowances_loading){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h2\",{children:\"Loading... daily allowances\"})});}if(dailyallowances_error){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h2\",{children:\"Internet connections problem!\"})});}return/*#__PURE__*/_jsx(\"div\",{className:classes.root,children:/*#__PURE__*/_jsx(Grid,{container:true,direction:\"row\",children:dailyallowances.filter(function(i){return i.empid===loginLevel.loginUserId;}).map(function(row){return/*#__PURE__*/_jsxs(ListItem,{children:[/*#__PURE__*/_jsx(Grid,{item:true,sm:2,align:\"center\",children:/*#__PURE__*/_jsx(ListItemText,{children:row.period})}),/*#__PURE__*/_jsx(Grid,{item:true,sm:5,align:\"center\",children:/*#__PURE__*/_jsx(ListItemText,{children:row.no_of_days})}),/*#__PURE__*/_jsx(Grid,{item:true,sm:2,align:\"center\",children:/*#__PURE__*/_jsx(ListItemText,{children:row.amount})}),/*#__PURE__*/_jsx(Grid,{item:true,sm:3,align:\"center\",children:/*#__PURE__*/_jsx(ListItemText,{children:row.status})})]},row.id);})})});}var useStyles=makeStyles(function(theme){return{root:{padding:0},dialog:{width:1000}};});","map":{"version":3,"sources":["D:/react-myprojects/hrms-airtable-july2/src/components/DailyAllowancesTableViewStaff.js"],"names":["React","useState","useEffect","useHistory","Link","Grid","ListItem","ListItemText","makeStyles","useSetRecoilState","useRecoilValue","useRecoilState","useRecoilValueLoadable","allowsPeriodState","allowsDataState","empidState","loginLevelState","fetchDailyAllowancesSelector","AddIcon","EditIcon","DeleteIcon","CheckIcon","SearchIcon","ArrowBackIcon","CustomDialog","useDailyAllowancesContext","DailyAllowsDetlsTable","FILTERSTRING","columns","title","field","type","DailyAllowancesTableViewStaff","history","classes","useStyles","loginLevel","setLoginLevel","isDialogOpen","setIsDialogOpen","tmpallowsdata","setTmpallowsdata","allows_period","allows_empid","allowsdata","setAllowsdata","setEmpID","dailyallowances","loadEmpDailyAllowances","dailyallowances_loading","dailyallowances_error","loginUserId","handleDialogOpen","handleDialogClose","root","filter","i","empid","map","row","period","no_of_days","amount","status","id","theme","padding","dialog","width"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useHistory, Link } from \"react-router-dom\";\r\nimport { Grid, ListItem, ListItemText } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport {\r\n  useSetRecoilState,\r\n  useRecoilValue,\r\n  useRecoilState,\r\n  useRecoilValueLoadable,\r\n} from \"recoil\";\r\nimport {\r\n  allowsPeriodState,\r\n  allowsDataState,\r\n  empidState,\r\n  loginLevelState,\r\n} from \"./data/atomdata\";\r\nimport { fetchDailyAllowancesSelector } from \"./data/selectordata\";\r\nimport AddIcon from \"@material-ui/icons/Add\";\r\nimport EditIcon from \"@material-ui/icons/Edit\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport CheckIcon from \"@material-ui/icons/Check\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport ArrowBackIcon from \"@material-ui/icons/ArrowBack\";\r\nimport { CustomDialog } from \"../helpers/CustomDialog\";\r\nimport { useDailyAllowancesContext } from \"../context/dailyallowances_context\";\r\n//import { useEmployeesContext } from \"../context/employees_context\";\r\nimport DailyAllowsDetlsTable from \"./DailyAllowsDetlsTable\";\r\n\r\nconst FILTERSTRING = \"Pending\";\r\n\r\nconst columns = [\r\n  {\r\n    title: \"Name\",\r\n    field: \"name\",\r\n  },\r\n  { title: \"Period\", field: \"period\" },\r\n  { title: \"Location\", field: \"location\" },\r\n  { title: \"Manager\", field: \"manager_name\" },\r\n  { title: \"Days\", field: \"no_of_days\", type: \"numeric\" },\r\n  { title: \"Amount\", field: \"amount\", type: \"currency\" },\r\n  { title: \"Status\", field: \"status\" },\r\n];\r\n\r\nexport default function DailyAllowancesTableViewStaff() {\r\n  let history = useHistory();\r\n  const classes = useStyles();\r\n  const [loginLevel, setLoginLevel] = useRecoilState(loginLevelState);\r\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\r\n  const [tmpallowsdata, setTmpallowsdata] = useState([]);\r\n  const allows_period = useRecoilValue(allowsPeriodState);\r\n  const allows_empid = useRecoilValue(empidState);\r\n  const [allowsdata, setAllowsdata] = useRecoilState(allowsDataState);\r\n  const setEmpID = useSetRecoilState(empidState);\r\n  const title = `Site Allowances (${allows_period})`;\r\n  const {\r\n    dailyallowances,\r\n    loadEmpDailyAllowances,\r\n    dailyallowances_loading,\r\n    dailyallowances_error,\r\n  } = useDailyAllowancesContext();\r\n\r\n  useEffect(() => {\r\n    loadEmpDailyAllowances(loginLevel.loginUserId);\r\n  }, []);\r\n\r\n  const handleDialogOpen = () => {\r\n    //console.log(\"allowsdetls\", allowsdata, allowsdataRef, singlebatch_dailyallowsdetl);\r\n    //setAllowsdata({ singlebatch_dailyallowsdetl });\r\n    setIsDialogOpen(true);\r\n  };\r\n\r\n  const handleDialogClose = () => {\r\n    setIsDialogOpen(false);\r\n    //getSingleBatchDailyAllowance(dailyallowance_period);\r\n  };\r\n\r\n  if (dailyallowances_loading) {\r\n    return (\r\n      <div>\r\n        <h2>Loading... daily allowances</h2>\r\n      </div>\r\n    );\r\n  }\r\n  if (dailyallowances_error) {\r\n    return (\r\n      <div>\r\n        <h2>Internet connections problem!</h2>\r\n      </div>\r\n    );\r\n  }\r\n  return (\r\n    <div className={classes.root}>\r\n      <Grid container direction=\"row\">\r\n        {dailyallowances\r\n          .filter((i) => i.empid === loginLevel.loginUserId)\r\n          .map((row) => {\r\n            return (\r\n              <ListItem key={row.id}>\r\n                {/* <Grid item sm={2} align=\"center\">\r\n                  <ListItemText>{row.name}</ListItemText>\r\n                </Grid> */}\r\n                <Grid item sm={2} align=\"center\">\r\n                  <ListItemText>{row.period}</ListItemText>\r\n                </Grid>\r\n                <Grid item sm={5} align=\"center\">\r\n                  <ListItemText>{row.no_of_days}</ListItemText>\r\n                </Grid>\r\n                <Grid item sm={2} align=\"center\">\r\n                  <ListItemText>{row.amount}</ListItemText>\r\n                </Grid>\r\n                <Grid item sm={3} align=\"center\">\r\n                  <ListItemText>{row.status}</ListItemText>\r\n                </Grid>\r\n              </ListItem>\r\n            );\r\n          })}\r\n      </Grid>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    padding: 0,\r\n  },\r\n  dialog: {\r\n    width: 1000,\r\n  },\r\n}));\r\n"]},"metadata":{},"sourceType":"module"}